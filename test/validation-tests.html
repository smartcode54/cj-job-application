<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Form Validation Test Cases</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Kanit:wght@400;500;700&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Kanit', sans-serif; }
        .test-pass { background-color: #d1fae5; border-color: #10b981; }
        .test-fail { background-color: #fee2e2; border-color: #ef4444; }
        .test-pending { background-color: #fef3c7; border-color: #f59e0b; }
    </style>
</head>
<body class="bg-gray-100 p-8">
    <div class="max-w-6xl mx-auto">
        <h1 class="text-3xl font-bold text-gray-800 mb-8">Form Validation Test Cases</h1>
        
        <!-- Test Controls -->
        <div class="bg-white rounded-lg shadow-lg p-6 mb-8">
            <h2 class="text-xl font-semibold mb-4">Test Controls</h2>
            <div class="flex gap-4">
                <button id="run-all-tests" class="px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700">
                    Run All Tests
                </button>
                <button id="clear-results" class="px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700">
                    Clear Results
                </button>
                <div class="flex items-center gap-2">
                    <span class="text-sm text-gray-600">Auto-run:</span>
                    <input type="checkbox" id="auto-run" checked>
                </div>
            </div>
        </div>

        <!-- Test Results Summary -->
        <div class="bg-white rounded-lg shadow-lg p-6 mb-8">
            <h2 class="text-xl font-semibold mb-4">Test Results Summary</h2>
            <div class="grid grid-cols-4 gap-4 text-center">
                <div class="p-4 bg-green-100 rounded-lg">
                    <div id="passed-count" class="text-2xl font-bold text-green-600">0</div>
                    <div class="text-sm text-gray-600">Passed</div>
                </div>
                <div class="p-4 bg-red-100 rounded-lg">
                    <div id="failed-count" class="text-2xl font-bold text-red-600">0</div>
                    <div class="text-sm text-gray-600">Failed</div>
                </div>
                <div class="p-4 bg-yellow-100 rounded-lg">
                    <div id="pending-count" class="text-2xl font-bold text-yellow-600">0</div>
                    <div class="text-sm text-gray-600">Pending</div>
                </div>
                <div class="p-4 bg-blue-100 rounded-lg">
                    <div id="total-count" class="text-2xl font-bold text-blue-600">0</div>
                    <div class="text-sm text-gray-600">Total</div>
                </div>
            </div>
        </div>

        <!-- Test Cases Container -->
        <div id="test-results" class="space-y-6">
            <!-- Test cases will be dynamically generated here -->
        </div>
    </div>

    <script>
        // Test Data
        const testCases = {
            // Personal Information Tests
            personalInfo: [
                {
                    id: 'full-name-required',
                    name: 'ชื่อ - Required Field',
                    field: 'full-name',
                    testType: 'required',
                    description: 'Test that first name field is required',
                    expectedResult: 'Should show validation error when empty'
                },
                {
                    id: 'full-name-valid',
                    name: 'ชื่อ - Valid Input',
                    field: 'full-name',
                    testType: 'valid',
                    testValue: 'สมชาย',
                    description: 'Test valid first name input',
                    expectedResult: 'Should accept valid Thai name'
                },
                {
                    id: 'full-name-invalid-chars',
                    name: 'ชื่อ - Invalid Characters',
                    field: 'full-name',
                    testType: 'invalid',
                    testValue: '123@#$',
                    description: 'Test first name with invalid characters',
                    expectedResult: 'Should show validation error for invalid characters'
                },
                {
                    id: 'last-name-required',
                    name: 'นามสกุล - Required Field',
                    field: 'last-name',
                    testType: 'required',
                    description: 'Test that last name field is required',
                    expectedResult: 'Should show validation error when empty'
                },
                {
                    id: 'last-name-valid',
                    name: 'นามสกุล - Valid Input',
                    field: 'last-name',
                    testType: 'valid',
                    testValue: 'ใจดี',
                    description: 'Test valid last name input',
                    expectedResult: 'Should accept valid Thai last name'
                },
                {
                    id: 'idcard-required',
                    name: 'เลขบัตรประชาชน - Required Field',
                    field: 'idcard',
                    testType: 'required',
                    description: 'Test that ID card field is required',
                    expectedResult: 'Should show validation error when empty'
                },
                {
                    id: 'idcard-valid-format',
                    name: 'เลขบัตรประชาชน - Valid Format',
                    field: 'idcard',
                    testType: 'pattern',
                    testValue: '1 2345 67890 12 3',
                    pattern: '[0-9]{1} [0-9]{4} [0-9]{5} [0-9]{2} [0-9]{1}',
                    description: 'Test valid ID card format',
                    expectedResult: 'Should accept valid ID card format'
                },
                {
                    id: 'idcard-invalid-format',
                    name: 'เลขบัตรประชาชน - Invalid Format',
                    field: 'idcard',
                    testType: 'pattern',
                    testValue: '1234567890123',
                    pattern: '[0-9]{1} [0-9]{4} [0-9]{5} [0-9]{2} [0-9]{1}',
                    description: 'Test invalid ID card format',
                    expectedResult: 'Should show validation error for invalid format'
                },
                {
                    id: 'gender-required',
                    name: 'เพศ - Required Field',
                    field: 'gender',
                    testType: 'required',
                    description: 'Test that gender field is required',
                    expectedResult: 'Should show validation error when not selected'
                },
                {
                    id: 'gender-male-selected',
                    name: 'เพศ - Male Selected',
                    field: 'gender',
                    testType: 'radio',
                    testValue: 'male',
                    description: 'Test male gender selection',
                    expectedResult: 'Should accept male selection'
                },
                {
                    id: 'gender-female-selected',
                    name: 'เพศ - Female Selected',
                    field: 'gender',
                    testType: 'radio',
                    testValue: 'female',
                    description: 'Test female gender selection',
                    expectedResult: 'Should accept female selection'
                },
                {
                    id: 'education-required',
                    name: 'วุฒิการศึกษา - Required Field',
                    field: 'education',
                    testType: 'required',
                    description: 'Test that education field is required',
                    expectedResult: 'Should show validation error when not selected'
                },
                {
                    id: 'education-valid-selection',
                    name: 'วุฒิการศึกษา - Valid Selection',
                    field: 'education',
                    testType: 'select',
                    testValue: 'Bachelor',
                    description: 'Test valid education selection',
                    expectedResult: 'Should accept valid education selection'
                },
                {
                    id: 'phone-required',
                    name: 'เบอร์โทรศัพท์ - Required Field',
                    field: 'phone',
                    testType: 'required',
                    description: 'Test that phone field is required',
                    expectedResult: 'Should show validation error when empty'
                },
                {
                    id: 'phone-valid-format',
                    name: 'เบอร์โทรศัพท์ - Valid Format',
                    field: 'phone',
                    testType: 'tel',
                    testValue: '081-234-5678',
                    description: 'Test valid phone format',
                    expectedResult: 'Should accept valid phone format'
                },
                {
                    id: 'phone-invalid-format',
                    name: 'เบอร์โทรศัพท์ - Invalid Format',
                    field: 'phone',
                    testType: 'tel',
                    testValue: '123',
                    description: 'Test invalid phone format',
                    expectedResult: 'Should show validation error for invalid format'
                },
                {
                    id: 'lineid-optional',
                    name: 'Line ID - Optional Field',
                    field: 'lineid',
                    testType: 'optional',
                    description: 'Test that Line ID field is optional',
                    expectedResult: 'Should allow empty Line ID field'
                },
                {
                    id: 'lineid-valid',
                    name: 'Line ID - Valid Input',
                    field: 'lineid',
                    testType: 'valid',
                    testValue: 'example_lineid',
                    description: 'Test valid Line ID input',
                    expectedResult: 'Should accept valid Line ID'
                }
            ],

            // Job Application Tests
            jobApplication: [
                {
                    id: 'position-required',
                    name: 'ตำแหน่งที่ต้องการสมัคร - Required Field',
                    field: 'position',
                    testType: 'required',
                    description: 'Test that position field is required',
                    expectedResult: 'Should show validation error when not selected'
                },
                {
                    id: 'position-valid-selection',
                    name: 'ตำแหน่งที่ต้องการสมัคร - Valid Selection',
                    field: 'position',
                    testType: 'select',
                    testValue: 'พนักงานขาย',
                    description: 'Test valid position selection',
                    expectedResult: 'Should accept valid position selection'
                },
                {
                    id: 'near-branch-required',
                    name: 'สาขาใกล้เคียง - Required Field',
                    field: 'nearBranch',
                    testType: 'required',
                    description: 'Test that near branch field is required',
                    expectedResult: 'Should show validation error when not selected'
                },
                {
                    id: 'near-branch-yes',
                    name: 'สาขาใกล้เคียง - Yes Selected',
                    field: 'nearBranch',
                    testType: 'radio',
                    testValue: 'yes',
                    description: 'Test near branch yes selection',
                    expectedResult: 'Should accept yes selection'
                },
                {
                    id: 'near-branch-no',
                    name: 'สาขาใกล้เคียง - No Selected',
                    field: 'nearBranch',
                    testType: 'radio',
                    testValue: 'no',
                    description: 'Test near branch no selection',
                    expectedResult: 'Should accept no selection'
                },
                {
                    id: 'guarantor-required',
                    name: 'บุคคลค้ำประกัน - Required Field',
                    field: 'garuner',
                    testType: 'required',
                    description: 'Test that guarantor field is required',
                    expectedResult: 'Should show validation error when not selected'
                },
                {
                    id: 'guarantor-yes',
                    name: 'บุคคลค้ำประกัน - Yes Selected',
                    field: 'garuner',
                    testType: 'radio',
                    testValue: 'yes',
                    description: 'Test guarantor yes selection',
                    expectedResult: 'Should accept yes selection'
                },
                {
                    id: 'guarantor-no',
                    name: 'บุคคลค้ำประกัน - No Selected',
                    field: 'garuner',
                    testType: 'radio',
                    testValue: 'no',
                    description: 'Test guarantor no selection',
                    expectedResult: 'Should accept no selection'
                },
                {
                    id: 'criminal-history-required',
                    name: 'ประวัติอาชญากรรม - Required Field',
                    field: 'criminal-history',
                    testType: 'required',
                    description: 'Test that criminal history field is required',
                    expectedResult: 'Should show validation error when not selected'
                },
                {
                    id: 'criminal-history-yes',
                    name: 'ประวัติอาชญากรรม - Yes Selected',
                    field: 'criminal-history',
                    testType: 'radio',
                    testValue: 'yes',
                    description: 'Test criminal history yes selection',
                    expectedResult: 'Should accept yes selection and show details field'
                },
                {
                    id: 'criminal-history-no',
                    name: 'ประวัติอาชญากรรม - No Selected',
                    field: 'criminal-history',
                    testType: 'radio',
                    testValue: 'no',
                    description: 'Test criminal history no selection',
                    expectedResult: 'Should accept no selection'
                },
                {
                    id: 'criminal-details-conditional',
                    name: 'รายละเอียดข้อหา - Conditional Field',
                    field: 'criminal-details',
                    testType: 'conditional',
                    dependsOn: 'criminal-history',
                    dependsValue: 'yes',
                    description: 'Test criminal details field visibility',
                    expectedResult: 'Should show when criminal history is yes'
                },
                {
                    id: 'start-date-required',
                    name: 'วันที่เริ่มงาน - Required Field',
                    field: 'start-working-date',
                    testType: 'required',
                    description: 'Test that start date field is required',
                    expectedResult: 'Should show validation error when empty'
                },
                {
                    id: 'start-date-valid',
                    name: 'วันที่เริ่มงาน - Valid Date',
                    field: 'start-working-date',
                    testType: 'date',
                    testValue: '2024-01-01',
                    description: 'Test valid start date',
                    expectedResult: 'Should accept valid date'
                },
                {
                    id: 'start-date-past',
                    name: 'วันที่เริ่มงาน - Past Date',
                    field: 'start-working-date',
                    testType: 'date',
                    testValue: '2020-01-01',
                    description: 'Test past start date',
                    expectedResult: 'Should accept past date (business rule)'
                }
            ],

            // PDPA Consent Tests
            pdpaConsent: [
                {
                    id: 'pdpa-consent-required',
                    name: 'PDPA Consent - Required Field',
                    field: 'pdpa-consent',
                    testType: 'required',
                    description: 'Test that PDPA consent is required',
                    expectedResult: 'Should show validation error when not checked'
                },
                {
                    id: 'pdpa-consent-checked',
                    name: 'PDPA Consent - Checked',
                    field: 'pdpa-consent',
                    testType: 'checkbox',
                    testValue: 'on',
                    description: 'Test PDPA consent checked',
                    expectedResult: 'Should accept checked consent'
                }
            ],

            // Cross-field Validation Tests
            crossField: [
                {
                    id: 'form-complete-valid',
                    name: 'Form Complete - All Valid',
                    testType: 'form-complete',
                    description: 'Test complete form with all valid data',
                    expectedResult: 'Should submit successfully',
                    testData: {
                        'full-name': 'สมชาย',
                        'last-name': 'ใจดี',
                        'idcard': '1 2345 67890 12 3',
                        'gender': 'male',
                        'education': 'Bachelor',
                        'phone': '081-234-5678',
                        'lineid': 'example_lineid',
                        'position': 'พนักงานขาย',
                        'nearBranch': 'yes',
                        'garuner': 'yes',
                        'criminal-history': 'no',
                        'start-working-date': '2024-01-01',
                        'pdpa-consent': 'on'
                    }
                },
                {
                    id: 'form-incomplete-missing-required',
                    name: 'Form Incomplete - Missing Required Fields',
                    testType: 'form-incomplete',
                    description: 'Test form with missing required fields',
                    expectedResult: 'Should show validation errors for missing fields',
                    testData: {
                        'full-name': 'สมชาย',
                        'last-name': 'ใจดี'
                        // Missing other required fields
                    }
                }
            ]
        };

        // Test Runner
        class FormValidationTester {
            constructor() {
                this.results = {
                    passed: 0,
                    failed: 0,
                    pending: 0,
                    total: 0
                };
                this.testResults = [];
                this.init();
            }

            init() {
                this.setupEventListeners();
                this.generateTestCases();
                this.updateSummary();
                
                if (document.getElementById('auto-run').checked) {
                    this.runAllTests();
                }
            }

            setupEventListeners() {
                document.getElementById('run-all-tests').addEventListener('click', () => {
                    this.runAllTests();
                });

                document.getElementById('clear-results').addEventListener('click', () => {
                    this.clearResults();
                });
            }

            generateTestCases() {
                const container = document.getElementById('test-results');
                container.innerHTML = '';

                // Generate test cases for each category
                Object.keys(testCases).forEach(category => {
                    const categoryDiv = document.createElement('div');
                    categoryDiv.className = 'bg-white rounded-lg shadow-lg p-6';
                    
                    const categoryTitle = this.getCategoryTitle(category);
                    categoryDiv.innerHTML = `
                        <h2 class="text-xl font-semibold text-gray-700 mb-4">${categoryTitle}</h2>
                        <div id="tests-${category}" class="space-y-3"></div>
                    `;
                    
                    container.appendChild(categoryDiv);
                    
                    const testsContainer = document.getElementById(`tests-${category}`);
                    testCases[category].forEach(test => {
                        const testDiv = this.createTestElement(test);
                        testsContainer.appendChild(testDiv);
                    });
                });
            }

            getCategoryTitle(category) {
                const titles = {
                    personalInfo: 'ข้อมูลส่วนตัว (Personal Information)',
                    jobApplication: 'ข้อมูลการสมัคร (Job Application)',
                    pdpaConsent: 'PDPA Consent',
                    crossField: 'Cross-field Validation'
                };
                return titles[category] || category;
            }

            createTestElement(test) {
                const div = document.createElement('div');
                div.className = 'border rounded-lg p-4 test-pending';
                div.id = `test-${test.id}`;
                
                div.innerHTML = `
                    <div class="flex justify-between items-start mb-2">
                        <h3 class="font-medium text-gray-800">${test.name}</h3>
                        <span class="text-sm text-gray-500">${test.testType}</span>
                    </div>
                    <p class="text-sm text-gray-600 mb-2">${test.description}</p>
                    <div class="text-sm">
                        <strong>Expected:</strong> <span class="text-gray-700">${test.expectedResult}</span>
                    </div>
                    <div class="mt-2 text-sm">
                        <span class="test-status text-yellow-600">⏳ Pending</span>
                    </div>
                `;
                
                return div;
            }

            async runAllTests() {
                this.clearResults();
                this.results = { passed: 0, failed: 0, pending: 0, total: 0 };
                
                // Count total tests
                Object.values(testCases).forEach(category => {
                    this.results.total += category.length;
                });
                this.results.pending = this.results.total;
                this.updateSummary();

                // Run tests by category
                for (const [category, tests] of Object.entries(testCases)) {
                    for (const test of tests) {
                        await this.runTest(test);
                        await this.delay(100); // Small delay between tests
                    }
                }
            }

            async runTest(test) {
                const testElement = document.getElementById(`test-${test.id}`);
                const statusElement = testElement.querySelector('.test-status');
                
                try {
                    let result;
                    
                    switch (test.testType) {
                        case 'required':
                            result = await this.testRequiredField(test);
                            break;
                        case 'valid':
                            result = await this.testValidInput(test);
                            break;
                        case 'invalid':
                            result = await this.testInvalidInput(test);
                            break;
                        case 'pattern':
                            result = await this.testPatternValidation(test);
                            break;
                        case 'radio':
                            result = await this.testRadioSelection(test);
                            break;
                        case 'select':
                            result = await this.testSelectOption(test);
                            break;
                        case 'tel':
                            result = await this.testPhoneValidation(test);
                            break;
                        case 'date':
                            result = await this.testDateValidation(test);
                            break;
                        case 'checkbox':
                            result = await this.testCheckboxValidation(test);
                            break;
                        case 'optional':
                            result = await this.testOptionalField(test);
                            break;
                        case 'conditional':
                            result = await this.testConditionalField(test);
                            break;
                        case 'form-complete':
                            result = await this.testCompleteForm(test);
                            break;
                        case 'form-incomplete':
                            result = await this.testIncompleteForm(test);
                            break;
                        default:
                            result = { success: false, message: 'Unknown test type' };
                    }
                    
                    this.updateTestResult(testElement, statusElement, result);
                    
                } catch (error) {
                    this.updateTestResult(testElement, statusElement, {
                        success: false,
                        message: `Test error: ${error.message}`
                    });
                }
            }

            async testRequiredField(test) {
                // Simulate form validation
                const field = document.querySelector(`[name="${test.field}"]`);
                if (!field) {
                    return { success: false, message: 'Field not found' };
                }
                
                // Test empty value
                field.value = '';
                const isValid = field.checkValidity();
                
                return {
                    success: !isValid, // Required field should be invalid when empty
                    message: isValid ? 'Field should be required but validation passed' : 'Field correctly shows as required'
                };
            }

            async testValidInput(test) {
                const field = document.querySelector(`[name="${test.field}"]`);
                if (!field) {
                    return { success: false, message: 'Field not found' };
                }
                
                field.value = test.testValue || '';
                const isValid = field.checkValidity();
                
                return {
                    success: isValid,
                    message: isValid ? 'Valid input accepted' : 'Valid input rejected'
                };
            }

            async testInvalidInput(test) {
                const field = document.querySelector(`[name="${test.field}"]`);
                if (!field) {
                    return { success: false, message: 'Field not found' };
                }
                
                field.value = test.testValue || '';
                const isValid = field.checkValidity();
                
                return {
                    success: !isValid, // Invalid input should be rejected
                    message: !isValid ? 'Invalid input correctly rejected' : 'Invalid input was accepted'
                };
            }

            async testPatternValidation(test) {
                const field = document.querySelector(`[name="${test.field}"]`);
                if (!field) {
                    return { success: false, message: 'Field not found' };
                }
                
                field.value = test.testValue || '';
                const pattern = new RegExp(field.pattern);
                const matches = pattern.test(field.value);
                
                return {
                    success: matches,
                    message: matches ? 'Pattern validation passed' : 'Pattern validation failed'
                };
            }

            async testRadioSelection(test) {
                const radio = document.querySelector(`[name="${test.field}"][value="${test.testValue}"]`);
                if (!radio) {
                    return { success: false, message: 'Radio button not found' };
                }
                
                radio.checked = true;
                const isValid = radio.checkValidity();
                
                return {
                    success: isValid,
                    message: isValid ? 'Radio selection accepted' : 'Radio selection rejected'
                };
            }

            async testSelectOption(test) {
                const select = document.querySelector(`[name="${test.field}"]`);
                if (!select) {
                    return { success: false, message: 'Select field not found' };
                }
                
                select.value = test.testValue || '';
                const isValid = select.checkValidity();
                
                return {
                    success: isValid,
                    message: isValid ? 'Select option accepted' : 'Select option rejected'
                };
            }

            async testPhoneValidation(test) {
                const field = document.querySelector(`[name="${test.field}"]`);
                if (!field) {
                    return { success: false, message: 'Field not found' };
                }
                
                field.value = test.testValue || '';
                const isValid = field.checkValidity();
                
                // Additional phone format validation
                const phonePattern = /^[0-9-]{10,12}$/;
                const formatValid = phonePattern.test(field.value);
                
                return {
                    success: isValid && formatValid,
                    message: (isValid && formatValid) ? 'Phone validation passed' : 'Phone validation failed'
                };
            }

            async testDateValidation(test) {
                const field = document.querySelector(`[name="${test.field}"]`);
                if (!field) {
                    return { success: false, message: 'Field not found' };
                }
                
                field.value = test.testValue || '';
                const isValid = field.checkValidity();
                
                return {
                    success: isValid,
                    message: isValid ? 'Date validation passed' : 'Date validation failed'
                };
            }

            async testCheckboxValidation(test) {
                const checkbox = document.querySelector(`[name="${test.field}"]`);
                if (!checkbox) {
                    return { success: false, message: 'Checkbox not found' };
                }
                
                checkbox.checked = true;
                const isValid = checkbox.checkValidity();
                
                return {
                    success: isValid,
                    message: isValid ? 'Checkbox validation passed' : 'Checkbox validation failed'
                };
            }

            async testOptionalField(test) {
                const field = document.querySelector(`[name="${test.field}"]`);
                if (!field) {
                    return { success: false, message: 'Field not found' };
                }
                
                field.value = '';
                const isValid = field.checkValidity();
                
                return {
                    success: isValid, // Optional field should be valid when empty
                    message: isValid ? 'Optional field correctly allows empty value' : 'Optional field incorrectly requires value'
                };
            }

            async testConditionalField(test) {
                // Test conditional field visibility
                const dependsOnField = document.querySelector(`[name="${test.dependsOn}"]`);
                const conditionalField = document.querySelector(`[name="${test.field}"]`);
                
                if (!dependsOnField || !conditionalField) {
                    return { success: false, message: 'Conditional field or dependency not found' };
                }
                
                // Set dependency value
                if (dependsOnField.type === 'radio') {
                    const radio = document.querySelector(`[name="${test.dependsOn}"][value="${test.dependsValue}"]`);
                    if (radio) radio.checked = true;
                } else {
                    dependsOnField.value = test.dependsValue;
                }
                
                // Check if conditional field is visible
                const container = document.getElementById('criminal-details-container');
                const isVisible = container && !container.classList.contains('hidden');
                
                return {
                    success: isVisible,
                    message: isVisible ? 'Conditional field is visible' : 'Conditional field is not visible'
                };
            }

            async testCompleteForm(test) {
                // Fill form with test data
                Object.entries(test.testData).forEach(([fieldName, value]) => {
                    const field = document.querySelector(`[name="${fieldName}"]`);
                    if (field) {
                        if (field.type === 'radio' || field.type === 'checkbox') {
                            const element = document.querySelector(`[name="${fieldName}"][value="${value}"]`);
                            if (element) element.checked = true;
                        } else {
                            field.value = value;
                        }
                    }
                });
                
                // Test form validity
                const form = document.getElementById('application-form');
                const isValid = form.checkValidity();
                
                return {
                    success: isValid,
                    message: isValid ? 'Complete form is valid' : 'Complete form has validation errors'
                };
            }

            async testIncompleteForm(test) {
                // Fill form with incomplete data
                Object.entries(test.testData).forEach(([fieldName, value]) => {
                    const field = document.querySelector(`[name="${fieldName}"]`);
                    if (field) {
                        if (field.type === 'radio' || field.type === 'checkbox') {
                            const element = document.querySelector(`[name="${fieldName}"][value="${value}"]`);
                            if (element) element.checked = true;
                        } else {
                            field.value = value;
                        }
                    }
                });
                
                // Test form validity
                const form = document.getElementById('application-form');
                const isValid = form.checkValidity();
                
                return {
                    success: !isValid, // Incomplete form should be invalid
                    message: !isValid ? 'Incomplete form correctly shows as invalid' : 'Incomplete form incorrectly shows as valid'
                };
            }

            updateTestResult(testElement, statusElement, result) {
                if (result.success) {
                    testElement.className = 'border rounded-lg p-4 test-pass';
                    statusElement.innerHTML = '✅ Passed';
                    statusElement.className = 'test-status text-green-600';
                    this.results.passed++;
                } else {
                    testElement.className = 'border rounded-lg p-4 test-fail';
                    statusElement.innerHTML = `❌ Failed: ${result.message}`;
                    statusElement.className = 'test-status text-red-600';
                    this.results.failed++;
                }
                
                this.results.pending--;
                this.updateSummary();
            }

            updateSummary() {
                document.getElementById('passed-count').textContent = this.results.passed;
                document.getElementById('failed-count').textContent = this.results.failed;
                document.getElementById('pending-count').textContent = this.results.pending;
                document.getElementById('total-count').textContent = this.results.total;
            }

            clearResults() {
                this.results = { passed: 0, failed: 0, pending: 0, total: 0 };
                this.updateSummary();
                
                // Reset all test elements to pending state
                document.querySelectorAll('[id^="test-"]').forEach(element => {
                    element.className = 'border rounded-lg p-4 test-pending';
                    const statusElement = element.querySelector('.test-status');
                    statusElement.innerHTML = '⏳ Pending';
                    statusElement.className = 'test-status text-yellow-600';
                });
            }

            delay(ms) {
                return new Promise(resolve => setTimeout(resolve, ms));
            }
        }

        // Initialize the tester when the page loads
        document.addEventListener('DOMContentLoaded', () => {
            new FormValidationTester();
        });
    </script>
</body>
</html>
